<!-- APP MAIN ==========-->
<main id="app-main" class="app-main">
  <div class="wrap">
	<section class="app-content">
		<div class="row">
			<div class="col-md-12 col-sm-12">
				<div class="widget p-md clearfix">
					<div class="pull-left">
						<h3 class="widget-title">Welcome to ScrollMantra</h3>
					</div>

				</div><!-- .widget -->
			</div>

		</div><!-- .row -->

		<div class="row">
			<div class="col-md-3 col-sm-6">
				<div class="widget stats-widget">
					<div class="widget-body clearfix">
						<div class="pull-left">
							<h3 class="widget-title text-primary"><span class="counter" data-plugin="counterUp" id="uploadfile">0</span></h3>
							<small class="text-color">Total uploads From Last 7 days</small>
						</div>
						<span class="pull-right big-icon watermark"><i class="fa fa-paperclip"></i></span>
					</div>
					<footer class="widget-footer bg-primary">
						<span class="small-chart pull-right" data-plugin="sparkline" data-options="[4,3,5,2,1], { type: 'bar', barColor: '#ffffff', barWidth: 5, barSpacing: 2 }"></span>
					</footer>
				</div><!-- .widget -->
			</div>

			<div class="col-md-3 col-sm-6">
				<div class="widget stats-widget">
					<div class="widget-body clearfix">
						<div class="pull-left">
							<h3 class="widget-title text-danger"><span class="counter" data-plugin="counterUp" id="pdfupload">0</span></h3>
							<small class="text-color"> Pdf From Last 7 days </small>
						</div>
						<span class="pull-right big-icon watermark"><i class="fa fa-ban"></i></span>
					</div>
					<footer class="widget-footer bg-danger">
						<span class="small-chart pull-right" data-plugin="sparkline" data-options="[1,2,3,5,4], { type: 'bar', barColor: '#ffffff', barWidth: 5, barSpacing: 2 }"></span>
					</footer>
				</div><!-- .widget -->
			</div>

			<div class="col-md-3 col-sm-6">
				<div class="widget stats-widget">
					<div class="widget-body clearfix">
						<div class="pull-left">
							<h3 class="widget-title text-success"><span class="counter" data-plugin="counterUp" id="pngupload">0</span></h3>
							<small class="text-color"> Png Images From Last 7 days</small>
						</div>
						<span class="pull-right big-icon watermark"><i class="fa fa-unlock-alt"></i></span>
					</div>
					<footer class="widget-footer bg-success">
						<span class="small-chart pull-right" data-plugin="sparkline" data-options="[2,4,3,4,3], { type: 'bar', barColor: '#ffffff', barWidth: 5, barSpacing: 2 }"></span>
					</footer>
				</div><!-- .widget -->
			</div>

			<div class="col-md-3 col-sm-6">
				<div class="widget stats-widget">
					<div class="widget-body clearfix">
						<div class="pull-left">
							<h3 class="widget-title text-warning"><span class="counter" data-plugin="counterUp" id="txtupload">0</span></h3>
							<small class="text-color"> Text File From Last 7 days</small>
						</div>
						<span class="pull-right big-icon watermark"><i class="fa fa-file-text-o"></i></span>
					</div>
					<footer class="widget-footer bg-warning">
						<span class="small-chart pull-right" data-plugin="sparkline" data-options="[5,4,3,5,2],{ type: 'bar', barColor: '#ffffff', barWidth: 5, barSpacing: 2 }"></span>
					</footer>
				</div><!-- .widget -->
			</div>
		</div><!-- .row -->

		

		<div class="row">
			<div class="col-md-12">
				<div class="widget">
					<header class="widget-header">
						<h4 class="widget-title">All Files</h4>
					</header>
					<hr class="widget-separator"/>
					<div class="widget-body">
						<div class="table-responsive">							
							<table class="table no-cellborder">
								<thead>
									<tr>
										<th>File Name</th>
										<th>Type</th>
										<th>Bucket Name</th>
										<th>Folder Name</th>
										<th>Created At</th>
										<th>Download</th>
									  </tr>
								</thead>
								<tbody id="userlist">
								</tbody>
							</table>
						</div>
					</div>
				</div><!-- .widget -->
			</div><!-- END column -->

		
		</div><!-- .row -->

		<div class="row">
			<div class="col-md-12 col-sm-12">
				<div class="widget">
					<header class="widget-header">
						<h4 class="widget-title">Activities</h4>
					</header>
					<hr class="widget-separator" />
					<div class="widget-body">
						<div class="streamline">
							<div class="sl-item sl-primary">
								<div class="sl-content">
									<small class="text-muted" id="upload">0</small>
									<p>Total Upload From Last 7 days</p>
								</div>
							</div><!-- .sl-item -->

							<div class="sl-item sl-danger">
								<div class="sl-content">
									<small class="text-muted" id="pdf">0</small>
									<p>Total Pdf File From Last 7 days</p>
								</div>
							</div><!-- .sl-item -->

							<div class="sl-item sl-success">
								<div class="sl-content">
									<small class="text-muted" id="png">0</small>
									<p>Total Png File From Last 7 days</p>
								</div>
							</div><!-- .sl-item -->

							<div class="sl-item sl-warning">
								<div class="sl-content">
									<small class="text-muted" id="txt">0</small>
									<p>Total Text File From Last 7 days</p>
								</div>
							</div><!-- .sl-item -->
						</div><!-- .streamline -->
					</div>
				</div><!-- .widget -->
			</div>


		</div><!-- .row -->



	</section><!-- #dash-content -->
</div><!-- .wrap -->
</main>
<!--========== END app main -->

<script>
	let id = '<%=userId._id%>'
	fetch(`/uploadfilelast7days/${id}`)
		.then(res => res.json())
		.then(data => {
			document.getElementById("uploadfile").textContent = data
			document.getElementById("upload").textContent = data
		})

	fetch(`/uploadimageslast7days/pdf/${id}`)
		.then(res => res.json())
		.then(data => {
			document.getElementById("pdfupload").textContent = data
			document.getElementById("pdf").textContent = data
		})

		fetch(`/uploadimageslast7days/png/${id}`)
		.then(res => res.json())
		.then(data => {
			document.getElementById("pngupload").textContent = data
			document.getElementById("png").textContent = data
		})

		fetch(`/uploadimageslast7days/txt/${id}`)
		.then(res => res.json())
		.then(data => {
			document.getElementById("txtupload").textContent = data
			document.getElementById("txt").textContent = data
			
		})

		
	fetch(`/showallfiles/${id}`)
		.then(data => data.json())
		.then(result => {
			console.log(result)
		const list = document.querySelector("#userlist");
		result.map(res =>{
			const row = document.createElement('tr');
        row.innerHTML = `
					<td>${res.filename}</td>
                    <td>${res.extname}</td>
                    <td>${res.bucketname}</td>
					<td>${res.foldername}</td>
                    <td>${res.createdAt}</td>
                    <td><a href="${res.url}">Dowload</a></td>
					`;
        list.appendChild(row);
		})
		})
</script>



